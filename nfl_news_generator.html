<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFL News Generator</title>

    <script>
        function drawImage(team, alert_text, header_text, bottom_text) {
            // Get team data.
            var t = teamData(team);
            const canvas = document.getElementById('news-generator');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Add player image to left side.
            const img = document.getElementById('player-img');  
            ctx.drawImage(img, 0, 0, 665, canvas.height);

            // Add team logo to the top right.
            const logo = new Image();   // Create new img element
            logo.addEventListener('load', function() {
                ctx.drawImage(logo, 550, -100, canvas.width/2, canvas.height/2);
            }, false);
            logo.src = 'logos/' + team + '.webp';

            // Draw right hand background.
            ctx.fillStyle = t.bg_color;
            ctx.fillRect(665, 0, 535, 1200);
            
            // Draw alert box (white)
            ctx.fillStyle = 'rgb(255, 255, 255)';
            ctx.fillRect(634, 495, 566, 170);

            // Add alert text.
            ctx.fillStyle = 'rgb(0, 0, 0)';
            ctx.font = 'bold 100px Verdana';
            ctx.fillText(alert_text.toUpperCase(), 700, 615, 480);

            // Add header text.
            var header = getLines(ctx, header_text, 480);
            ctx.fillStyle = t.header_color;
            ctx.font = '70px Verdana';
            header.forEach(function(line, i) {
                ctx.fillText(line.toUpperCase(), 700, 815+(i*80),);
            });
            

            // Add bottom text.
            var bottom = getLines(ctx, bottom_text, 480);
            ctx.fillStyle = t.text_color;
            ctx.font = 'lighter 50px Verdana';
            bottom.forEach(function(line, i) {
                ctx.fillText(line.toUpperCase(), 700, 1015+(i*80),);
            });

            // const url = document.getElementById('img-url');
            // url.innerText = canvas.toDataURL();

        }

        window.onload = function() {
            drawImage('nfl','ALERT', 'header text', 'bottom text');
            
        }
        function generate() {
            var formData = new FormData(document.querySelector('form'));
            
            var team = formData.get('team');
            var alert_text = formData.get('alert-text');
            var header_text = formData.get('header-text');
            var bottom_text = formData.get('bottom-text');

            drawImage(team, alert_text, header_text, bottom_text);
        }
      </script>
</head>
<body>
    <form id="generate-form" action="">
        <!-- <input type="file" class="upload-image"> -->
        Alert Text: <input type="text" name="alert-text" id="alert-text">
        Header Text: <input type="text" name="header-text" id="header-text">
        Bottom Text: <input type="text" name="bottom-text" id="bottom-text">
        <select name="team" id="team">
            <option value="arizona-cardinals">Arizona Cardinals</option>
            <option value="atlanta-falcons">Atlanta Falcons</option>
            <option value="baltimore-ravens">Baltimore Ravens</option>
            <option value="buffalo-bills">Buffalo Bills</option>
            <option value="carolina-panthers">Carolina Panthers</option>
            <option value="chicago-bears">Chicago Bears</option>
            <option value="cincinnati-bengals">Cincinnati Bengals</option>
            <option value="cleveland-browns">Cleveland Browns</option>
            <option value="dallas-cowboys">Dallas Cowboys</option>
            <option value="denver-broncos">Denver Broncos</option>
            <option value="detroit-lions">Detroit Lions</option>
            <option value="green-bay-packers">Green Bay Packers</option>
            <option value="houston-texans">Houston Texans</option>
            <option value="indianapolis-colts">Indianapolis Colts</option>
            <option value="jacksonville-jaguars">Jacksonville Jaguars</option>
            <option value="kansas-city-chiefs">Kansas City Chiefs</option>
            <option value="las-vegas-raiders">Las Vegas Raiders</option>
            <option value="los-angeles-chargers">Los Angeles Chargers</option>
            <option value="los-angeles-rams">Los Angeles Rams</option>
            <option value="miami-dolphins">Miami Dolphins</option>
            <option value="minnesota-vikings">Minnesota Vikings</option>
            <option value="new-england-patriots">New England Patriots</option>
            <option value="new-orleans-saints">New Orleans Saints</option>
            <option value="new-york-giants">New York Giants</option>
            <option value="new-york-jets">New York Jets</option>
            <option value="philadelphia-eagles">Philadelphia Eagles</option>
            <option value="pittsburgh-steelers">Pittsburgh Steelers</option>
            <option value="san-francisco-49ers">San Francisco 49ers</option>
            <option value="seattle-seahawks">Seattle Seahawks</option>
            <option value="tampa-bay-buccaneers">Tampa Bay Buccaneers</option>
            <option value="tennessee-titans">Tennessee Titans</option>
            <option value="washington-commanders">Washington Commanders</option>
        </select>
        <input type="button" value="Generate" onclick="generate()">
    </form>
    
    <canvas id="news-generator" height="1200" width="1200">
    </canvas>
    <img src="baker.jpeg" id="player-img" alt="default image" style="display: none;">
    <p id="img-url"></p>
    <script>
        function getLines(ctx, text, maxWidth) {
            var words = text.split(" ");
            var lines = [];
            var currentLine = words[0];

            for (var i = 1; i < words.length; i++) {
                var word = words[i];
                var width = ctx.measureText(currentLine + " " + word).width;
                if (width < maxWidth) {
                    currentLine += " " + word;
                } else {
                    lines.push(currentLine);
                    currentLine = word;
                }
            }
            lines.push(currentLine);
            return lines;
        }

        function teamData(team){
            var teams = {
                'nfl': {
                    'bg_color': 'rgb(0, 51, 104)',
                    'header_color': 'rgb(213, 10, 11)',
                    'text_color': 'rgb(250, 250, 250)'
                },
                'arizona-cardinals': {
                    'bg_color': 'rgb(151, 35, 63)',
                    'header_color': 'rgb(250, 250, 250)',
                    'text_color': 'rgb(250, 250, 250)'
                },
                'atlanta-falcons': {
                    'bg_color': 'rgb(0, 0, 0)',
                    'header_color': 'rgb(167, 25, 48)',
                    'text_color': 'rgb(167, 25, 48)'
                },
                'baltimore-ravens': {
                    'bg_color': 'rgb(26, 25, 95)',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'buffalo-bills': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'carolina-panthers': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'chicago-bears': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'cincinnati-bengals': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'cleveland-browns': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'dallas-cowboys': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'denver-broncos': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'detroit-lions': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'green-bay-packers': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'houston-texans': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'indianapolis-colts': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'jacksonville-jaguars': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'kansas-city-chiefs': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'las-vegas-raiders': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'los-angeles-chargers': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'los-angeles-rams': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'miami-dolphins': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'minnesota-vikings': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'new-england-patriots': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'new-orleans-saints': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'new-york-giants': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'new-york-jets': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'philadelphia-eagles': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'pittsburgh-steelers': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'san-francisco-49ers': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'seattle-seahawks': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'tampa-bay-buccaneers': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'tennessee-titans': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                },
                'washington-commanders': {
                    'bg_color': 'rgb()',
                    'header_color': 'rgb()',
                    'text_color': 'rgb()'
                }
            }
            return teams[team];
        }
    </script>
</body>
</html>